<!DOCTYPE html>
{% load static %}
{% load heroicons %}
{% load i18n %}
<html lang="{{ LANGUAGE_CODE }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <style>
    /* Critical: Prevent horizontal overflow */
    html, body {
      overflow-x: hidden;
      max-width: 100%;
      position: relative;
    }
    * {
      box-sizing: border-box;
    }
  </style>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <!-- Font Awesome 6 - Professional Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <style>.heroicon{width:1.25rem;height:1.25rem;display:inline-block;vertical-align:middle}</style>

  <link rel="stylesheet" href="{% static 'app/css/owl.carousel.min.css' %}"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="{% static 'app/css/style.css' %}"/>
  <link rel="stylesheet" href="{% static 'app/css/mobile-responsive.css' %}"/>
  <link rel="icon" href="{% static 'app/images/logo.png' %}" type="image/png">
  <title>Dairy Product | {% block title %}{% endblock title %} Document</title>
  {% block extra_head %}{% endblock %}
  <style>
    #pageLoader{position:fixed;top:0;left:0;width:100%;height:100vh;background:linear-gradient(135deg,#1b5e20 0%,#2e7d32 50%,#4caf50 100%);z-index:999999;display:flex;align-items:center;justify-content:center;transition:opacity 0.8s,visibility 0.8s;overflow:hidden}
    #pageLoader.hide{opacity:0;visibility:hidden}
    #pageLoader::before{content:'';position:absolute;width:200%;height:200%;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="50" font-size="50" opacity="0.05">üåæ</text></svg>') repeat;animation:float 20s linear infinite}
    @keyframes float{to{transform:translate(-50px,-50px)}}
    .loader-box{text-align:center;max-width:500px;padding:20px;position:relative;z-index:1}
    .logo-animate{width:100px;height:100px;margin:0 auto 20px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 10px 40px rgba(0,0,0,0.3);animation:pulse 2s ease-in-out infinite;cursor:pointer;transition:transform 0.3s}
    .logo-animate:hover{transform:scale(1.15)!important}
    .logo-animate img{width:70px;height:70px;border-radius:50%}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.08)}}
    .loader-text{color:#fff;font-size:2rem;font-weight:700;margin-bottom:15px;text-shadow:2px 2px 4px rgba(0,0,0,0.3)}
    .progress-container{background:rgba(255,255,255,0.2);border-radius:25px;height:30px;margin:20px 0;overflow:hidden;position:relative}
    .progress-bar{height:100%;background:linear-gradient(90deg,#ffc107,#ff9800);border-radius:25px;transition:width 0.3s;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:0.9rem}
    .tip-box{background:rgba(255,255,255,0.15);backdrop-filter:blur(10px);border-radius:15px;padding:20px;margin-top:20px;min-height:80px;border:2px solid rgba(255,255,255,0.3)}
    .tip-icon{font-size:2rem;margin-bottom:10px}
    .tip-text{color:#fff;font-size:1rem;line-height:1.5;font-weight:500}
    .click-hint{color:#ffc107;font-size:0.85rem;margin-top:10px;animation:blink 2s infinite}
    @keyframes blink{0%,100%{opacity:1}50%{opacity:0.5}}
  </style>
</head>

<body>
  <div id="pageLoader">
    <div class="loader-box">
      <div class="logo-animate" id="logoClick">
        <img src="{% static 'app/images/logo.png' %}" alt="Logo" />
      </div>
      <h2 class="loader-text">Kisan Connect</h2>
      <div class="progress-container">
        <div class="progress-bar" id="progressBar" style="width:0%">0%</div>
      </div>
      <div class="tip-box">
        <div class="tip-icon" id="tipIcon" style="transition:transform 0.3s">üå±</div>
        <div class="tip-text" id="tipText">üå± Tip: Rotate crops to maintain soil health</div>
        <div class="click-hint">‚¨ÜÔ∏è Click logo for more tips</div>
      </div>
    </div>
  </div>

<nav class="modern-navbar">
  <div class="container-fluid">
    <div class="nav-wrapper">
      <a class="brand" href="{% url 'home' %}">
        <img src="{% static 'app/images/logo.png' %}" alt="Logo" />
        <span>Kisan Connect</span>
      </a>
      
      <button class="mobile-toggle" type="button" onclick="document.getElementById('mobileNav').classList.toggle('show')">
        <i class="fa-solid fa-bars"></i>
      </button>

      <div class="nav-content" id="mobileNav">
        <ul class="nav-menu">
          {% block navbar_items %}
          {% if request.user.is_authenticated %}
          <li><a href="{% url 'app:marketplace_home' %}">{% heroicon 'shopping-cart' 'outline' 'heroicon' %} Marketplace</a></li>
          <li class="dropdown">
            <a href="#" data-bs-toggle="dropdown"><i class="bi bi-grid-3x3-gap"></i> Categories</a>
            <ul class="dropdown-menu">
              <li><a href="{% url 'category' 'SD' %}"><i class="fa-solid fa-seedling"></i> Seeds</a></li>
              <li><a href="{% url 'category' 'FT' %}"><i class="fa-solid fa-flask"></i> Fertilizers</a></li>
              <li><a href="{% url 'category' 'MC' %}"><i class="fa-solid fa-tractor"></i> Machinery</a></li>
              <li><a href="{% url 'category' 'EQ' %}"><i class="fa-solid fa-wrench"></i> Equipment</a></li>
            </ul>
          </li>
          <li><a href="{% url 'app:about' %}"><i class="fa-solid fa-circle-info"></i> About</a></li>
          <li><a href="{% url 'app:contact' %}"><i class="fa-solid fa-phone"></i> Contact</a></li>
          {% endif %}
          {% endblock %}
        </ul>
        
        <form class="search-form" method="GET" action="{% url 'app:search' %}">
          <input type="search" name="q" placeholder="Search..." required />
          <button type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
        </form>
        
        <div class="nav-actions">
          {% include 'app/language_switcher.html' %}
          {% if request.user.is_authenticated %}
          <a href="{% url 'app:profile' %}" class="user-btn">{% heroicon 'user' 'outline' 'heroicon' %} <span class="btn-text">Profile</span></a>
          <a href="{% url 'app:orders' %}" class="user-btn"><i class="fa-solid fa-box"></i> <span class="btn-text">Orders</span></a>
          <a href="{% url 'app:passwordchange' %}" class="user-btn"><i class="fa-solid fa-key"></i> <span class="btn-text">Password</span></a>
          <a href="#" onclick="document.getElementById('logoutForm').submit(); return false;" class="logout-btn">{% heroicon 'logout' 'outline' 'heroicon' %} <span class="btn-text">Logout</span></a>
          <a href="{% url 'app:showcart' %}" class="cart-btn"><i class="fa-solid fa-cart-shopping"></i> <span class="btn-text">Cart</span><span class="badge">{% if totalitem > 0 %}{{ totalitem }}{% else %}0{% endif %}</span></a>
          {% else %}
          <a href="#" data-bs-toggle="modal" data-bs-target="#roleSelectModal" class="login-btn">{% heroicon 'login' 'outline' 'heroicon' %} <span class="btn-text">Login</span></a>
          <a href="{% url 'app:customerregistration' %}" class="register-btn">{% heroicon 'user-plus' 'outline' 'heroicon' %} <span class="btn-text">Register</span></a>
          {% endif %}
        </div>
      </div>
      <form method="post" action="{% url 'app:logout' %}" id="logoutForm" style="display:none;">{% csrf_token %}</form>
    </div>
  </div>
</nav>



  {% block banner_slider %}{% endblock banner_slider %}
  {% block information %}{% endblock information %}
  {% block main-content %}{% endblock main-content %}
  {% block content %}{% endblock content %}
  {% block payment-gateway %}{% endblock payment-gateway %}

  <!-- Role Selection Modal -->
  {% include 'app/role_select_modal.html' %}

  <footer class="container-fluid bg-success text-center p-3 mt-5">
    <p class="mb-0 text-white">¬© 2025 Kisan Connect - Agricultural Marketplace</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js" integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="{% static 'app/js/owl.carousel.min.js' %}"></script>
  <script src="{% static 'app/js/myscript.js' %}"></script>
  <script>
    const MIN_DISPLAY_TIME=3000;// Change to 800 for production
    const tips=['üå± Tip: Rotate crops to maintain soil health','üíß Tip: Drip irrigation saves 60% water','üåæ Tip: Organic farming increases soil fertility','üöú Tip: Regular equipment maintenance saves costs','‚òÄÔ∏è Tip: Check weather before planting','üåø Tip: Mulching reduces water evaporation','üêõ Tip: Natural pest control protects crops','üìä Tip: Track expenses for better profits'];
    let progress=0,tipIndex=0,startTime=Date.now(),pageLoaded=false;
    const bar=document.getElementById('progressBar'),tipText=document.getElementById('tipText'),tipIcon=document.getElementById('tipIcon');
    const icons=['üå±','üíß','üåæ','üöú','‚òÄÔ∏è','üåø','üêõ','üìä'];
    function updateTip(){
      tipIcon.style.transform='scale(0)';
      setTimeout(()=>{
        tipIndex=(tipIndex+1)%tips.length;
        tipIcon.textContent=icons[tipIndex];
        tipText.textContent=tips[tipIndex];
        tipIcon.style.transform='scale(1)';
      },200);
    }
    document.getElementById('logoClick').onclick=updateTip;
    const interval=setInterval(()=>{
      progress+=2;
      bar.style.width=progress+'%';
      bar.textContent=progress+'%';
      if(progress>=50&&progress<52)updateTip();
      if(progress>=100)clearInterval(interval);
    },MIN_DISPLAY_TIME/50);
    function hideLoader(){
      const elapsed=Date.now()-startTime;
      const remaining=Math.max(0,MIN_DISPLAY_TIME-elapsed);
      clearInterval(interval);
      bar.style.width='100%';
      bar.textContent='100%';
      setTimeout(()=>document.getElementById('pageLoader').classList.add('hide'),remaining+300);
    }
    window.addEventListener('load',function(){
      pageLoaded=true;
      hideLoader();
    });
  </script>
</body>
</html>

<style>
.modern-navbar{background:linear-gradient(135deg,#1b5e20,#2e7d32);position:sticky;top:0;z-index:99999;box-shadow:0 2px 10px rgba(0,0,0,0.1)}
.nav-wrapper{display:flex;align-items:center;justify-content:space-between;padding:0.5rem 1rem;position:relative;z-index:99999}
.brand{display:flex;align-items:center;gap:0.4rem;color:#fff;text-decoration:none;font-weight:700;font-size:0.95rem}
.brand img{height:32px;border-radius:8px}
.mobile-toggle{display:none;background:none;border:2px solid #fff;color:#fff;font-size:1.5rem;padding:0.25rem 0.5rem;border-radius:8px;cursor:pointer;line-height:1;z-index:100000}
.nav-content{display:flex;align-items:center;gap:1.5rem;flex:1;margin-left:1.5rem}
.nav-menu{display:flex;list-style:none;margin:0;padding:0;gap:0.3rem}
.nav-menu li{position:relative}
.nav-menu a{color:#fff;text-decoration:none;padding:0.5rem 0.8rem;border-radius:6px;transition:all 0.3s;display:flex;align-items:center;gap:0.3rem;font-size:0.85rem;white-space:nowrap}
.nav-menu a:hover{background:rgba(255,255,255,0.15)}
.dropdown-menu{position:absolute;top:100%;left:0;background:#fff;border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,0.15);padding:0.4rem 0;min-width:180px;z-index:100001}
.dropdown-menu li{list-style:none}
.dropdown-menu a{color:#333;padding:0.6rem 1rem;border-radius:0;font-size:0.85rem}
.dropdown-menu a:hover{background:#f0f0f0}
.search-form{display:flex;margin-left:auto}
.search-form input{border:none;padding:0.5rem 0.8rem;border-radius:25px 0 0 25px;width:200px;outline:none;font-size:0.85rem}
.search-form button{border:none;background:#ffc107;padding:0.5rem 0.8rem;border-radius:0 25px 25px 0;cursor:pointer;color:#333;font-size:0.85rem}
.nav-actions{display:flex;align-items:center;gap:0.6rem}
.user-btn,.cart-btn,.login-btn,.register-btn,.logout-btn{color:#fff;text-decoration:none;padding:0.5rem 0.8rem;border-radius:25px;display:flex;align-items:center;gap:0.3rem;font-weight:600;transition:all 0.3s;white-space:nowrap;font-size:0.85rem}
.logout-btn{background:linear-gradient(135deg,#ff4757 0%,#ff6348 100%);color:#fff;border:none;box-shadow:0 4px 15px rgba(255,71,87,0.3);position:relative;overflow:hidden}
.logout-btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);transition:left 0.5s}
.logout-btn:hover{background:linear-gradient(135deg,#ee5a6f 0%,#ff4757 100%);transform:translateY(-2px);box-shadow:0 6px 20px rgba(255,71,87,0.4)}
.logout-btn:hover::before{left:100%}
.cart-btn{background:#ffc107;color:#333;position:relative}
.cart-btn .badge{position:absolute;top:-5px;right:-5px;background:#dc3545;color:#fff;border-radius:50%;padding:0.15rem 0.4rem;font-size:0.65rem}
.login-btn{border:2px solid #fff}
.register-btn{background:#ffc107;color:#333}

@media (max-width: 1200px) {
  .nav-wrapper{padding:0.5rem 0.8rem}
  .nav-content{gap:0.8rem;margin-left:0.8rem}
  .nav-menu{gap:0.2rem}
  .nav-menu a{padding:0.4rem 0.6rem;font-size:0.8rem}
  .search-form input{width:150px;font-size:0.8rem;padding:0.4rem 0.6rem}
  .search-form button{padding:0.4rem 0.6rem;font-size:0.8rem}
  .nav-actions{gap:0.4rem}
  .user-btn,.cart-btn,.login-btn,.register-btn,.logout-btn{padding:0.4rem 0.6rem;font-size:0.8rem}
  .btn-text{display:none}
}

@media (max-width: 992px) {
  .mobile-toggle{display:block !important;z-index:100000}
  .nav-content{position:fixed;top:0;left:-100%;width:280px;height:100vh;background:linear-gradient(180deg,#f8fffe 0%,#ffffff 100%);flex-direction:column;align-items:stretch;margin:0;padding:2rem 1.5rem;box-shadow:4px 0 25px rgba(27,94,32,0.15);overflow-y:auto;z-index:99999;transition:left 0.3s cubic-bezier(0.4,0,0.2,1);border-right:3px solid #e8f5e9}
  .nav-content.show{left:0 !important;display:flex !important}
  .nav-content::before{content:'';position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(27,94,32,0.4);z-index:-1;opacity:0;pointer-events:none;transition:opacity 0.3s}
  .nav-content.show::before{opacity:1;pointer-events:auto}
  .nav-menu{flex-direction:column;width:100%;gap:0.3rem;margin-top:1.5rem}
  .nav-menu li{width:100%}
  .nav-menu a{padding:1rem 1.2rem;width:100%;justify-content:flex-start;font-size:0.95rem;color:#2d5016;border-radius:12px;background:linear-gradient(135deg,#ffffff 0%,#f1f8e9 100%);border:1px solid #e8f5e9;font-weight:500;box-shadow:0 2px 8px rgba(46,125,50,0.08)}
  .nav-menu a:hover{background:linear-gradient(135deg,#e8f5e9 0%,#c8e6c9 100%);color:#1b5e20;transform:translateX(4px);box-shadow:0 4px 12px rgba(46,125,50,0.15)}
  .nav-menu a i{color:#4caf50;margin-right:0.8rem;font-size:1.1rem}
  .dropdown-menu{position:static !important;box-shadow:none;background:linear-gradient(135deg,#f1f8e9 0%,#e8f5e9 100%);margin:0.5rem 0 0 1.5rem;border-radius:10px;display:block !important;padding:0.5rem 0;border:1px solid #c8e6c9}
  .dropdown-menu a{color:#2e7d32 !important;padding:0.8rem 1rem;font-size:0.9rem;background:transparent;border:none;box-shadow:none}
  .dropdown-menu a:hover{background:linear-gradient(135deg,#c8e6c9 0%,#a5d6a7 100%) !important;color:#1b5e20 !important}
  .search-form{width:100%;margin:1.5rem 0;order:-1}
  .search-form input{width:100%;border-radius:25px;padding:0.9rem 1.2rem;font-size:0.9rem;border:2px solid #c8e6c9;background:#ffffff;color:#2d5016;box-shadow:inset 0 2px 4px rgba(46,125,50,0.05)}
  .search-form input:focus{border-color:#4caf50;box-shadow:0 0 0 3px rgba(76,175,80,0.1)}
  .search-form button{display:none}
  .nav-actions{flex-direction:column;width:100%;gap:0.8rem;margin-top:1.5rem;padding-top:1.5rem;border-top:2px solid #e8f5e9}
  .user-btn,.cart-btn,.login-btn,.register-btn,.logout-btn{width:100%;justify-content:center;padding:0.9rem 1.2rem;font-size:0.9rem;border-radius:12px;font-weight:600;box-shadow:0 3px 10px rgba(0,0,0,0.1);transition:all 0.3s}
  .user-btn{background:linear-gradient(135deg,#2e7d32 0%,#388e3c 100%);color:#fff;border:none}
  .user-btn:hover{background:linear-gradient(135deg,#1b5e20 0%,#2e7d32 100%);transform:translateY(-2px);box-shadow:0 5px 15px rgba(46,125,50,0.3)}
  .logout-btn{background:linear-gradient(135deg,#ff4757 0%,#ff6348 100%)!important;color:#fff!important;border:none!important;box-shadow:0 4px 15px rgba(255,71,87,0.35)!important;position:relative;overflow:hidden}
  .logout-btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);transition:left 0.5s}
  .logout-btn:hover{background:linear-gradient(135deg,#ee5a6f 0%,#ff4757 100%)!important;transform:translateY(-3px) scale(1.02)!important;box-shadow:0 6px 25px rgba(255,71,87,0.5)!important}
  .logout-btn:hover::before{left:100%}
  .login-btn{background:linear-gradient(135deg,#2e7d32 0%,#388e3c 100%);color:#fff;border:none}
  .login-btn:hover{background:linear-gradient(135deg,#1b5e20 0%,#2e7d32 100%);transform:translateY(-2px)}
  .cart-btn{background:linear-gradient(135deg,#ff9800 0%,#ffa726 100%);color:#fff;position:relative}
  .cart-btn:hover{background:linear-gradient(135deg,#f57c00 0%,#ff9800 100%);transform:translateY(-2px)}
  .register-btn{background:linear-gradient(135deg,#4caf50 0%,#66bb6a 100%);color:#fff}
  .register-btn:hover{background:linear-gradient(135deg,#388e3c 0%,#4caf50 100%);transform:translateY(-2px)}
  .btn-text{display:inline !important}
}

@media (max-width: 576px) {
  .nav-wrapper{padding:0.4rem 0.6rem;gap:0.5rem}
  .brand{font-size:0.85rem;flex:1}
  .brand span{max-width:120px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
  .brand img{height:28px}
  .mobile-toggle{font-size:1.3rem;padding:0.2rem 0.4rem;display:block !important}
  .nav-content{width:85%;max-width:300px;padding:1.2rem 0.8rem}
  .nav-menu a{font-size:0.85rem;padding:0.75rem 0.9rem}
  .dropdown-menu a{font-size:0.8rem;padding:0.6rem 0.9rem}
  .search-form input{padding:0.7rem 0.9rem;font-size:0.85rem}
  .nav-actions{gap:0.5rem}
  .user-btn,.cart-btn,.login-btn,.register-btn,.logout-btn{font-size:0.85rem;padding:0.7rem 0.9rem}
  .cart-btn .badge{font-size:0.65rem;padding:0.15rem 0.4rem}
}
</style>
