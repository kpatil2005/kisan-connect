{% extends 'app/base.html' %}
{% load static %}
{% block title %}Marketplace - Agricultural Products{% endblock %}

{% block main-content %}
<div class="container my-5">
  <div class="text-center mb-5">
    <h1 class="display-4 fw-bold text-success">ðŸŒ¾ Agricultural Marketplace</h1>
    <p class="lead text-muted">Find all your farming needs in one place</p>
  </div>

  <!-- Category Cards -->
  <div class="row g-4">
    <!-- Seeds Category -->
    <div class="col-md-6 col-lg-3">
      <div class="card h-100 shadow-sm border-0 category-card">
        <div class="card-body text-center p-4">
          <i class="bi bi-flower1 text-success" style="font-size: 3rem;"></i>
          <h4 class="card-title mt-3 mb-3">Seeds</h4>
          <p class="card-text text-muted">Premium quality seeds for all crops</p>
          <a href="{% url 'app:category' 'CR' %}" class="btn btn-success">Browse Seeds</a>
        </div>
      </div>
    </div>

    <!-- Fertilizers Category -->
    <div class="col-md-6 col-lg-3">
      <div class="card h-100 shadow-sm border-0 category-card">
        <div class="card-body text-center p-4">
          <i class="bi bi-droplet-half text-primary" style="font-size: 3rem;"></i>
          <h4 class="card-title mt-3 mb-3">Fertilizers</h4>
          <p class="card-text text-muted">Organic and chemical fertilizers</p>
          <a href="{% url 'app:category' 'FT' %}" class="btn btn-primary">Browse Fertilizers</a>
        </div>
      </div>
    </div>

    <!-- Equipment Category -->
    <div class="col-md-6 col-lg-3">
      <div class="card h-100 shadow-sm border-0 category-card">
        <div class="card-body text-center p-4">
          <i class="bi bi-tools text-danger" style="font-size: 3rem;"></i>
          <h4 class="card-title mt-3 mb-3">Equipment</h4>
          <p class="card-text text-muted">Farm tools and equipment</p>
          <a href="{% url 'app:category' 'EQ' %}" class="btn btn-danger">Browse Equipment</a>
        </div>
      </div>
    </div>

    <!-- Machinery Category -->
    <div class="col-md-6 col-lg-3">
      <div class="card h-100 shadow-sm border-0 category-card">
        <div class="card-body text-center p-4">
          <i class="bi bi-gear-fill text-warning" style="font-size: 3rem;"></i>
          <h4 class="card-title mt-3 mb-3">Machinery</h4>
          <p class="card-text text-muted">Tractors and farm machinery</p>
          <a href="{% url 'app:category' 'MC' %}" class="btn btn-warning">Browse Machinery</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Featured Products -->
  <div class="mt-5">
    <h2 class="text-center mb-4">Featured Products</h2>
    <div class="row g-4">
      {% for product in products %}
      <div class="col-md-6 col-lg-4">
        <div class="card h-100 shadow-sm border-0 product-card">
          <img src="{{ product.product_image.url }}" class="card-img-top p-3" alt="{{ product.title }}" style="height:200px; object-fit:contain;">
          <div class="card-body">
            <h5 class="card-title">{{ product.title }}</h5>
            <p class="card-text text-muted">{{ product.description|truncatewords:10 }}</p>
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <span class="fw-bold text-success">â‚¹{{ product.discounted_price }}</span>
                {% if product.selling_price != product.discounted_price %}
                <span class="text-muted text-decoration-line-through small">â‚¹{{ product.selling_price }}</span>
                {% endif %}
              </div>
            </div>
            <a href="{% url 'app:product-detail' product.id %}" class="btn btn-outline-success btn-sm w-100 mt-2">View Details</a>
          </div>
        </div>
      </div>
      {% empty %}
      <div class="col-12 text-center">
        <p class="text-muted">No products available at the moment.</p>
      </div>
      {% endfor %}
    </div>
  </div>
</div>

<style>
.category-card:hover {
  transform: translateY(-5px);
  transition: transform 0.3s ease;
}

.product-card:hover {
  transform: translateY(-3px);
  transition: transform 0.3s ease;
}
</style>
{% endblock %}