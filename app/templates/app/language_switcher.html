{% load i18n %}

<button class="btn btn-sm btn-outline-light" type="button" data-bs-toggle="modal" data-bs-target="#languageModal">
  <i class="fa-solid fa-language me-1"></i>
  {% get_current_language as LANGUAGE_CODE %}
  {% if LANGUAGE_CODE == 'en' %}English
  {% elif LANGUAGE_CODE == 'hi' %}‡§π‡§ø‡§®‡•ç‡§¶‡•Ä
  {% elif LANGUAGE_CODE == 'ta' %}‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç
  {% elif LANGUAGE_CODE == 'te' %}‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å
  {% elif LANGUAGE_CODE == 'bn' %}‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ
  {% elif LANGUAGE_CODE == 'mr' %}‡§Æ‡§∞‡§æ‡§†‡•Ä
  {% elif LANGUAGE_CODE == 'kn' %}‡≤ï‡≤®‡≥ç‡≤®‡≤°
  {% elif LANGUAGE_CODE == 'ml' %}‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç
  {% elif LANGUAGE_CODE == 'pa' %}‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä
  {% endif %}
</button>

<!-- Language Selection Modal -->
<div class="modal fade" id="languageModal" tabindex="-1" aria-labelledby="languageModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" style="border-radius:20px;border:none;box-shadow:0 10px 40px rgba(0,0,0,0.2)">
      <div class="modal-header" style="background:linear-gradient(135deg,#2e7d32,#4caf50);color:#fff;border-radius:20px 20px 0 0;border:none">
        <h5 class="modal-title fw-bold" id="languageModalLabel">
          <i class="fa-solid fa-globe me-2"></i>Select Your Language
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-4" style="background:#f8f9fa">
        <div class="row g-3">
          {% get_current_language as LANGUAGE_CODE %}
          {% get_available_languages as LANGUAGES %}
          {% get_language_info_list for LANGUAGES as languages %}
          {% for language in languages %}
          <div class="col-6 col-md-4">
            <form action="/i18n/setlang/" method="post">
              {% csrf_token %}
              <input name="next" type="hidden" value="/{{ language.code }}/" />
              <input name="language" type="hidden" value="{{ language.code }}" />
              <button type="submit" class="lang-card {% if language.code == LANGUAGE_CODE %}active{% endif %}">
                <div class="lang-flag">üåê</div>
                <div class="lang-name">{{ language.name_local }}</div>
                {% if language.code == LANGUAGE_CODE %}
                <div class="lang-check"><i class="fa-solid fa-circle-check"></i></div>
                {% endif %}
              </button>
            </form>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.lang-card{width:100%;padding:1.2rem 0.8rem;background:#fff;border:2px solid #e0e0e0;border-radius:12px;cursor:pointer;transition:all 0.3s;position:relative;display:flex;flex-direction:column;align-items:center;gap:0.5rem}
.lang-card:hover{transform:translateY(-5px);box-shadow:0 8px 20px rgba(46,125,50,0.2);border-color:#4caf50}
.lang-card.active{background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border-color:#2e7d32;box-shadow:0 4px 15px rgba(46,125,50,0.3)}
.lang-flag{font-size:2rem;margin-bottom:0.3rem}
.lang-name{font-weight:600;color:#333;font-size:0.9rem;text-align:center;line-height:1.3}
.lang-card.active .lang-name{color:#1b5e20}
.lang-check{position:absolute;top:8px;right:8px;color:#2e7d32;font-size:1.2rem}
@media (max-width:576px){.lang-card{padding:1rem 0.5rem}.lang-flag{font-size:1.5rem}.lang-name{font-size:0.8rem}}
</style>
